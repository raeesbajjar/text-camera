<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ðŸ“˜ Text Camera</title>
</head>

<body>
<h2>ðŸ“˜ Recorded Videos</h2>
<p>Click download to open or save the video.</p>

<ul id="videoList"></ul>
<script>
const USERNAME = "YOUR_GITHUB_USERNAME";   // ðŸ”´ change this
const REPO = "text-camera";
const FOLDER = "videos";
const DELETE_API = "https://text-camera-delete.YOURNAME.workers.dev"; // ðŸ”´ change this

const apiURL = `https://api.github.com/repos/${USERNAME}/${REPO}/contents/${FOLDER}`;

fetch(apiURL)
  .then(res => res.json())
  .then(files => {
    const list = document.getElementById("videoList");
    list.innerHTML = "";

    if (!files || files.length === 0) {
      list.innerHTML = "<li>No videos yet</li>";
      return;
    }

    files.forEach(file => {
      if (file.name.endsWith(".mp4")) {
        const li = document.createElement("li");

        li.innerHTML = `
          <strong>${file.name}</strong>
          <a href="${file.download_url}" target="_blank">â¬‡ Download</a>
          <button onclick="deleteVideo('${file.name}')">ðŸ—‘ Delete</button>
        `;

        list.appendChild(li);
      }
    });
  })
  .catch(() => {
    document.getElementById("videoList").innerHTML =
      "<li>Error loading videos</li>";
  });

function deleteVideo(name) {
  if (!confirm("Are you sure you want to delete " + name + "?")) {
    return;
  }

  fetch(`${DELETE_API}?file=${name}`)
    .then(() => {
      alert("Deleted successfully");
      location.reload();
    })
    .catch(() => alert("Delete failed"));
}
</script>

</body>
</html>
