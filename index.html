<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ðŸ“˜ Text Camera</title>
</head>

<body>
<h2>ðŸ“˜ Recorded Videos</h2>
<p>Click download to open or save the video.</p>

<ul id="videoList"></ul>

<script>
const USERNAME = "raeesbajjar";
const REPO = "text-camera";
const FOLDER = "videos";
const DELETE_API = "https://text-camera-delete.YOURNAME.workers.dev";

const apiURL = `https://api.github.com/repos/${USERNAME}/${REPO}/contents/${FOLDER}`;

fetch(apiURL)
  .then(res => res.json())
  .then(files => {
    const list = document.getElementById("videoList");

    files.forEach(file => {
      if (file.name.endsWith(".mp4")) {
        const li = document.createElement("li");

        li.innerHTML = `
          ${file.name}
          <a href="${file.download_url}" target="_blank">â¬‡ Download</a>
          <button onclick="deleteVideo('${file.name}')">ðŸ—‘ Delete</button>
        `;

        list.appendChild(li);
      }
    });
  });

function deleteVideo(name) {
  if (!confirm("Delete " + name + "?")) return;

  fetch(`${DELETE_API}?file=${name}`)
    .then(() => location.reload());
}
</script>

</body>
</html>
